مرحله ۱: آماده‌سازی IIS روی سرور (نصب ماژول‌ها)
IIS به صورت پیش‌فرض قابلیت فوروارد کردن درخواست‌ها را ندارد. باید دو ماژول زیر را دانلود و روی سرور نصب کنید (سرچ کنید و از سایت مایکروسافت دانلود کنید):

URL Rewrite Module (نسخه ۲ به بالا)

Application Request Routing (ARR) (نسخه ۳)

بعد از نصب، IIS Manager را ببندید و دوباره باز کنید.

مرحله ۲: فعال‌سازی پروکسی در IIS
در IIS Manager، روی نام سرور (بالاترین سطح سمت چپ) کلیک کنید.

در وسط صفحه، روی آیکون Application Request Routing Cache دابل کلیک کنید.

از پنل سمت راست (Actions)، روی Server Proxy Settings کلیک کنید.

تیک گزینه Enable proxy را بزنید و Apply را در سمت راست بزنید.

مرحله ۳: تنظیم پورت ۳۰۰۰ (برای فرانت‌ند) در IIS
ما می‌خواهیم هر کس به 94.182.xx.xx:3000 وصل شد، برود به 192.168.0.241:3000.

در IIS روی Sites راست کلیک کنید و Add Website را بزنید.

Site name: Proxy_Frontend

Physical path: یک پوشه خالی در درایو C بسازید (مثلاً C:\inetpub\Empty) و آن را انتخاب کنید (مهم نیست داخلش چیست).

Port: 3000

روی سایت جدیدی که ساختید کلیک کنید.

آیکون URL Rewrite را بزنید.

سمت راست Add Rule(s)... را بزنید و Reverse Proxy را انتخاب کنید.

در کادر Inbound Rules، آدرس سیستم خودتان را وارد کنید: 192.168.0.241:3000

تیک گزینه Enable SSL Offloading را بردارید (اگر SSL ندارید).

OK کنید.

مرحله ۴: تنظیم پورت ۵۰۰۰ (برای بک‌ند) در IIS
همان کار بالا را دقیقاً برای پورت ۵۰۰۰ تکرار کنید:

Add Website -> Name: Proxy_Backend -> Port: 5000 -> مسیر فیزیکی: همان پوشه خالی.

وارد URL Rewrite شوید -> Reverse Proxy.

آدرس مقصد: 192.168.0.241:5000

OK کنید.

نکته: فراموش نکنید که در فایروال ویندوز سرور، پورت‌های ۳۰۰۰ و ۵۰۰۰ را باز کنید (که قبلاً انجام دادید).

مرحله ۵: تنظیمات روی سیستم خودتان (ویندوز ۱۱)
حالا سیستم شما باید درخواست‌هایی که از طرف سرور می‌آید را قبول کند.

باز کردن فایروال ویندوز ۱۱:

به Windows Defender Firewall with Advanced Security بروید.

در Inbound Rules، پورت‌های 3000 و 5000 را باز (Allow) کنید تا سرور بتواند به سیستم شما وصل شود.